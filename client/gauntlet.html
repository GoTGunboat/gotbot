<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2017 by glorat (http://jsbin.com/hohaden/23/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Glorat's Gauntlet Crew Optimiser</title>
<style id="jsbin-css">
.skill { width: 3.5em }
.crit { width: 2.5em }
</style>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular.min.js"></script>
<script src="app.js"></script>
<script src="combinatorics.js"></script>
<script src="gauntlet.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" type="text/css" />

<body ng-app="myApp" ng-controller="myCtrl as vm" class="container-fluid">
  <h1>Glorat's Gauntlet Crew Optimiser</h1>
  <div class="row">
    Add as many of your crew into this table with the appropriate skill ranges and crit %.
    Then use the checkboxes to select who you want to participate in the Gauntlet.
    Press the Analyse button and it will calculate a blended strength rating of your crew!
    Try different combinations to see which set of crew gives the highest strength and use that for your gauntlet.
  </div>
    <div class="row">
The results table then shows every possible skill combo, your best character for that combo, and the average points a full strength crew person will get in a typical round. The final is then a weighted average adjusted by the featured skill set (if you select one). I.e. the final number is your average unfatigued score given the random choice of skill combos  </div>

  <div>
    <select ng-options="user.username for user in vm.users track by user._id" ng-model="vm.selectedUser" ng-change="vm.onSelectedUserChange()"></select>
  </div>

  <div ng-repeat="char in vm.chars" class="row">
  <div class="col-sm-3 col-lg-2">
    <input type="checkbox" ng-model="char.selected">
    <input type="text" ng-model="char.name" size="10">
    Crit: <input type="number" ng-model="char.crit" class="crit">%
  </div>
    <div class="col-sm-3 col-lg-2" ng-repeat="skill in char.skills">
      <select ng-options="sk for sk in vm.skills" ng-model="skill.name"></select>
      <input type="number" ng-model="skill.min" class="skill">-<input type="number" ng-model="skill.max" class="skill">
    </div>

  </div>
  <div>
    <button ng-click="vm.addChar()">Add</button>
    <button ng-click="vm.removeChar()">Remove</button>
  </div>
  <div>
    Featured Skill: <select ng-options="sk for sk in vm.skills" ng-model="vm.featuredSkill"></select>
  </div>
  <div>
        <button ng-click="vm.selectBest()">Select Top Chars</button>
    <button ng-click="vm.analyse()">Analyse Selected</button>
    <button ng-click="vm.analyseAll()">Analyse Combinations of Selected</button>
    <button ng-click="vm.reset()">Reset</button>
  </div>
  <div>
    <div ng-repeat="row in vm.result">
      {{ row[0] }} {{ row[1].name  }} {{ vm.comboAvg(row[1], row[0]) | number:0 }}
    </div>
    <div>
      Total: {{vm.total | number:0}}
    </div>
  </div>
  <div>
    <div ng-repeat="res in vm.fullRes" class="row">
      <div class="col-xs-1">{{ res.total | number:0 }}</div>
      <div class="col-xs-2" ng-repeat="nm in res.names">{{nm}}</div>
    </div>
  </div>
</body>
</html>
